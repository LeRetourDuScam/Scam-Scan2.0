<div class="py-10">
  <div class="container flex flex-row mx-auto px-4 sm:px-6 lg:px-8 w-full">

    <section class="w-1/3">
      
      <div class="border-b w-5/6 py-6">
        <h3 class="-my-3 flow-root">
          <button type="button" class="flex w-full items-center justify-between bg-white py-3 text-sm text-flex-400 hover:text-flex-500" aria-controls="filter-section-0" aria-expanded="false" (click)="toggleSection('status')">
            <span class="font-medium text-flex-900">Status</span>
            <span class="ml-6 flex items-center">
              <svg *ngIf="!isExpanded.status" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
              </svg>
              <svg *ngIf="isExpanded.status" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
        </h3>
        <div class="pt-6" id="filter-section-0" [ngClass]="{'hidden': !isExpanded.status}">
          <div class="space-y-4">
            <div *ngFor="let status of StatusEnum" class="flex items-center">
              <input id="filter-status-{{status}}" name="status[]" type="checkbox" [value]="status" (change)="handleCheckboxChange($event, 'status')" class="h-4 w-4 border-flex-300 rounded text-indigo-600 focus:ring-indigo-500">
              <label for="filter-status-{{status}}" class="ml-3 text-sm text-flex-600">{{ status }}</label>
            </div>
          </div>
        </div>
      </div>

      <div class="border-b w-5/6 py-6">
        <h3 class="-my-3 flow-root">
          <button type="button" class="flex  w-full items-center justify-between bg-white py-3 text-sm text-flex-400 hover:text-flex-500" aria-controls="filter-section-1" aria-expanded="false" (click)="toggleSection('types')">
            <span class="font-medium text-flex-900">Types</span>
            <span class="ml-6 flex items-center">
              <svg *ngIf="!isExpanded.types" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
              </svg>
              <svg *ngIf="isExpanded.types" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
        </h3>
        <div class="pt-6" id="filter-section-1" [ngClass]="{'hidden': !isExpanded.types}">
          <div class="space-y-4">
            <div *ngFor="let type of TypesEnum" class="flex items-center">
              <input id="filter-type-{{type}}" name="type[]" type="checkbox" [value]="type" (change)="handleCheckboxChange($event, 'type')" class="h-4 w-4 border-flex-300 rounded text-indigo-600 focus:ring-indigo-500">
              <label for="filter-type-{{type}}" class="ml-3 text-sm text-flex-600">{{ type }}</label>
            </div>
          </div>
        </div>
      </div>

      <div class="border-b w-5/6 py-6">
        <h3 class="-my-3 flow-root">
          <button type="button" class="flex  w-full items-center justify-between bg-white py-3 text-sm text-flex-400 hover:text-flex-500" aria-controls="filter-section-2" aria-expanded="false" (click)="toggleSection('genres')">
            <span class="font-medium text-flex-900">Genres</span>
            <span class="ml-6 flex items-center">
              <svg *ngIf="!isExpanded.genres" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
              </svg>
              <svg *ngIf="isExpanded.genres" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
        </h3>
        <div class="pt-6" id="filter-section-2" [ngClass]="{'hidden': !isExpanded.genres}">
          <div class="space-y-4">
            <div *ngFor="let genre of GenresEnum" class="flex items-center">
              <input id="filter-genre-{{genre}}" name="genre[]" type="checkbox" [value]="genre" (change)="handleCheckboxChange($event, 'genre')" class="h-4 w-4 border-flex-300 rounded text-indigo-600 focus:ring-indigo-500">
              <label for="filter-genre-{{genre}}" class="ml-3 text-sm text-flex-600">{{ genre }}</label>
            </div>
          </div>
        </div>
      </div>

      <div class="border-b w-5/6 py-6">
        <h3 class="-my-3 flow-root">
          <button type="button" class="flex  w-full items-center justify-between bg-white py-3 text-sm text-flex-400 hover:text-flex-500" aria-controls="filter-section-3" aria-expanded="false" (click)="toggleSection('languages')">
            <span class="font-medium text-flex-900">Languages</span>
            <span class="ml-6 flex items-center">
              <svg *ngIf="!isExpanded.languages" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
              </svg>
              <svg *ngIf="isExpanded.languages" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
        </h3>
        <div class="pt-6" id="filter-section-3" [ngClass]="{'hidden': !isExpanded.languages}">
          <div class="space-y-4">
            <div *ngFor="let language of LanguagesEnum" class="flex items-center">
              <input id="filter-language-{{language}}" name="language[]" type="checkbox" [value]="language" (change)="handleCheckboxChange($event, 'language')" class="h-4 w-4 border-flex-300 rounded text-indigo-600 focus:ring-indigo-500">
              <label for="filter-language-{{language}}" class="ml-3 text-sm text-flex-600">{{ language }}</label>
            </div>
          </div>
        </div>
      </div>

      <!-- <div class="border-b w-5/6 py-6">
        <h3 class="-my-3 flow-root">
          <button type="button" class="flex  w-full items-center justify-between bg-white py-3 text-sm text-flex-400 hover:text-flex-500" aria-controls="filter-section-3" aria-expanded="false" (click)="toggleSection('ratings')">
            <span class="font-medium text-flex-900">Ratings</span>
            <span class="ml-6 flex items-center">
              <svg *ngIf="!isExpanded.languages" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path d="M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z" />
              </svg>
              <svg *ngIf="isExpanded.languages" class="size-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon">
                <path fill-rule="evenodd" d="M4 10a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 10Z" clip-rule="evenodd" />
              </svg>
            </span>
          </button>
        </h3>
        <div class="pt-6" id="filter-section-3" [ngClass]="{'hidden': !isExpanded.languages}">
          <div class="space-y-4">
            <div *ngFor="let language of LanguagesEnum" class="flex items-center">
              <input id="filter-language-{{language}}" name="language[]" type="checkbox" [value]="language" (change)="handleCheckboxChange($event, 'language')" class="h-4 w-4 border-flex-300 rounded text-indigo-600 focus:ring-indigo-500">
              <label for="filter-language-{{language}}" class="ml-3 text-sm text-flex-600">{{ language }}</label>
            </div>
          </div>
        </div>
      </div> -->
    </section>
    
    <section class="w-2/3">
      <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div 
          class="bg-white dark:bg-flex-800 dark:text-white rounded-lg shadow-lg p-4 sm:p-6 lg:p-8 hover:cursor-pointer" 
          *ngFor="let manga of mangas" 
          [routerLink]="['/manga/view', manga.slug]"
        >
          <div class="mb-4">
            <h3 class="text-lg sm:text-xl lg:text-2xl font-bold">{{ manga.name }}</h3>
          </div>
          <img 
            [src]="manga.image" 
            alt="{{ manga.name }}" 
            class="w-2/3 h-48 sm:h-56 lg:h-64 object-cover rounded-lg mb-4" 
          />
          <div>
            <div *ngFor="let chapter of getLastChapters(manga)">
              <div 
                [routerLink]="['/manga/view', manga.slug, 'chapter', chapter.slug]" 
                class="text-red-600 dark:text-red-400 hover:underline text-sm sm:text-base lg:text-lg"
              >
                {{ chapter.name }} ajouté : {{ chapter.updated_at | date }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
  </div>

  <div class="flex justify-center mt-8 space-x-4">
    <button 
      (click)="previousPage()" 
      [disabled]="!hasPreviousPage()" 
      class="px-4 py-2 bg-flex-300 dark:bg-flex-700 dark:text-white text-flex-700 rounded hover:bg-flex-400 dark:hover:bg-flex-600 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Page Précédent
    </button>
    <button 
      (click)="nextPage()" 
      [disabled]="!hasNextPage()" 
      class="px-4 py-2 bg-flex-300 dark:bg-flex-700 dark:text-white text-flex-700 rounded hover:bg-flex-400 dark:hover:bg-flex-600 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Page Suivant
    </button>
  </div>
</div>